# SmartWatch - åŸºäº ESP32 çš„åˆ†å±‚æ¶æ„æ™ºèƒ½æ‰‹è¡¨

è¿™æ˜¯ä¸€ä¸ªåŸºäº ESP32-WROOM çš„æ™ºèƒ½æ‰‹è¡¨é¡¹ç›®ï¼Œé‡‡ç”¨ **åˆ†å±‚æ¶æ„** è®¾è®¡ã€‚é¡¹ç›®å®ç°äº†åº”ç”¨ç®¡ç†ã€GUI äº¤äº’ã€ç¡¬ä»¶æŠ½è±¡ç­‰åŠŸèƒ½ï¼Œå…·æœ‰é«˜åº¦çš„å¯æ‰©å±•æ€§å’Œè§£è€¦æ€§ã€‚

## ğŸ“º åŠŸèƒ½ç‰¹æ€§

æœ¬é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œä¸»èœå•åŒ…å«ä»¥ä¸‹ç‹¬ç«‹åº”ç”¨ä¸åŠŸèƒ½é›†åˆï¼š

* ğŸ•’ **ä¸»è¡¨ç›˜ (WatchFace)**:
    * æç®€é£æ ¼è®¾è®¡ï¼Œå®æ—¶åˆ·æ–°æ—¶é—´ä¸æ—¥æœŸã€‚
    * é¡¶éƒ¨å®æ—¶æ˜¾ç¤º **WiFi / è“ç‰™è¿æ¥çŠ¶æ€**ã€‚
    * åº•éƒ¨æ˜¾ç¤º **å®æ—¶å¤©æ°”** ä¸ **ä»Šæ—¥æ­¥æ•°** (åŸºäº MPU6050 è®¡æ­¥)ã€‚
* â˜ï¸ **å¤©æ°” (Weather)**: 
    * è”ç½‘è·å–å¹¶æ˜¾ç¤ºå½“å‰åŸå¸‚ **ä¸‰æ—¥å†…** çš„æ°”æ¸©ä¸å¤©æ°”çŠ¶å†µã€‚
* â° **é—¹é’Ÿ (Alarm)**: 
    * æ”¯æŒç‹¬ç«‹çš„é—¹é’Ÿè®¾ç½®ä¸å“é“ƒæé†’ã€‚
* ğŸ“… **æ—¥å† (Calendar)**: 
    * **å‡æœŸå€’è®¡æ—¶**: è‡ªåŠ¨è®¡ç®—å¹¶æ˜¾ç¤ºè·ç¦»ä¸‹ä¸€ä¸ªæ³•å®šèŠ‚å‡æ—¥çš„å‰©ä½™å¤©æ•°ã€‚
    * **æ¯æ—¥å åœ**: è¶£å‘³äº¤äº’å½©è›‹ï¼Œé•¿æŒ‰ä¸Šé”®è“„åŠ›è§£é”â€œä»Šæ—¥è¿åŠ¿â€ã€‚
* âš™ï¸ **è®¾ç½® (Settings)**: 
    * ç®¡ç† WiFi ä¸ è“ç‰™è¿æ¥ã€è°ƒæ•´ç³»ç»Ÿå‚æ•°ä¸ä¸ªæ€§åŒ–é€‰é¡¹ã€‚
* ğŸ® **æ¸¸æˆ (Games)**: 
    * è¿™æ˜¯ä¸€ä¸ª**æ¸¸æˆå®¹å™¨**ï¼Œæ”¯æŒæ‰©å±•æ›´å¤šæ¸¸æˆã€‚
    * ç›®å‰å†…ç½®ï¼š**æé¾™å¿«è·‘ (Dino Run)**ã€‚
* ğŸ›  **å·¥å…· (Tools)**: 
    * è¿™æ˜¯ä¸€ä¸ª**å®ç”¨å·¥å…·é›†åˆ**ã€‚
    * ç›®å‰å†…ç½®ï¼š**æ‰‹ç”µç­’**ã€**é™€èºä»ªæ ¡å‡†**ã€‚
* â„¹ï¸ **å…³äºæœ¬æœº (About)**:
    * **ç¡¬ä»¶æ£€æµ‹**: åŠ¨æ€è¯»å– CPU ä¸»é¢‘ã€Flash å®¹é‡åŠ **å®æ—¶å‰©ä½™å †å†…å­˜ (Free Heap)**ã€‚
    * **è®¾å¤‡æŒ‡çº¹**: æ˜¾ç¤ºèŠ¯ç‰‡å”¯ä¸€çš„ WiFi MAC ä¸ BLE MAC åœ°å€ã€‚

## ğŸ›  è½¯ä»¶æ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨äº†ç±»ä¼¼ MVC çš„åˆ†å±‚è®¾è®¡æ¨¡å¼ï¼Œå„æ¨¡å—èŒè´£å¦‚ä¸‹ï¼š

* **`/src/hal`**: 
    * **ç¡¬ä»¶æŠ½è±¡å±‚**ã€‚è´Ÿè´£ç›´æ¥ä¸ ESP32 å¯„å­˜å™¨æˆ–å¤–è®¾åº“ï¼ˆå¦‚ MPU6050, SSD1306ï¼‰äº¤äº’ã€‚
    * å‘ä¸Šä¼ é€’æ ‡å‡†åŒ–æ•°æ®ï¼Œå±è”½åº•å±‚ç¡¬ä»¶å·®å¼‚ã€‚
* **`/src/service`**:
    * **æœåŠ¡å±‚**ã€‚åå°å¤„ç† WiFiè¿æ¥å’Œè“ç‰™è¿æ¥ã€æ—¶é—´åŒæ­¥ (NTP)ã€æ•°æ®æŒä¹…åŒ– (Preferences)ã€‚
* **`/src/model`**:
    * **æ•°æ®æ¨¡å‹å±‚**ã€‚å®šä¹‰ç³»ç»Ÿæ•°æ®ç»“æ„ï¼Œç®¡ç†è¿è¡Œæ—¶çŠ¶æ€ã€‚
* **`/src/view`**:
    * **è§†å›¾å±‚**ã€‚è´Ÿè´£ UI ç»˜åˆ¶ (U8g2)ï¼Œä¸åŒ…å«ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œåªè´Ÿè´£â€œæ˜¾ç¤ºâ€ã€‚
* **`/src/controller`**:
    * **æ§åˆ¶å±‚**ã€‚è¿æ¥ Model å’Œ View çš„æ¡¥æ¢ï¼Œå¤„ç†ç”¨æˆ·è¾“å…¥å¹¶æ›´æ–° UIã€‚
* **`/src/apps`**:
    * **åº”ç”¨å±‚**ã€‚å…·ä½“çš„åº”ç”¨ç¨‹åºå…¥å£ï¼Œæ¯ä¸ª App ç»§æ‰¿è‡ªåŸºç±»ï¼Œå®ç°**å³æ’å³ç”¨**ã€‚

### ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TD
    %% --- ç¡¬ä»¶äº¤äº’ ---
    User([ç”¨æˆ·è¾“å…¥ / ä¼ æ„Ÿå™¨]) --> HAL[HAL ç¡¬ä»¶æŠ½è±¡å±‚]
    HAL ==> Controller
    
    %% --- æ ¸å¿ƒç³»ç»Ÿ ---
    subgraph Core [æ ¸å¿ƒç³»ç»Ÿ]
        direction TB
        Controller[Controller æ§åˆ¶å±‚]
        Model[Model æ•°æ®æ¨¡å‹]
        Service[(Service åå°æœåŠ¡)]
        
        Controller <--> Model
        Controller <--> Service
    end
    
    %% --- è§†å›¾è¾“å‡º ---
    Controller ==> View[View è§†å›¾å±‚]
    View --> Display([å±å¹•ç¡¬ä»¶ / Display])

    %% --- åº”ç”¨å±‚ (ä»…å±•ç¤ºæ ¸å¿ƒç¤ºä¾‹) ---
    subgraph Apps [åº”ç”¨å±‚]
        direction TB
        Weather[â˜ï¸ Weather App]
        
        %% å®¹å™¨ç¤ºä¾‹
        Games[ğŸ® Games å®¹å™¨] -.-> Dino[ğŸ¦– Dino Run]
        
        %% çœç•¥å·è¡¨ç¤ºè¿˜æœ‰æ›´å¤š
        Etc[... å…¶ä»–åº”ç”¨]
    end
    
    %% --- è¿æ¥å…³ç³» ---
    Controller -.-> Weather
    Controller -.-> Games
    Controller -.-> Etc